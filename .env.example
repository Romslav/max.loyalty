# ===================================================
# Max Loyalty — Environment Variables
# Скопируй в .env.local для локальной разработки
# НИКОГДА не коммить реальные значения!
# ===================================================

# === APPLICATION ===
NODE_ENV=development
PORT=3000
APP_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3001

# === DATABASE ===
# Dev (Docker)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/maxloyalty_dev
DIRECT_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/maxloyalty_dev
# Production (Neon.tech)
# DATABASE_URL=postgresql://user:pass@xxx.neon.tech/maxloyalty?sslmode=require
# DIRECT_DATABASE_URL=postgresql://user:pass@xxx.neon.tech/maxloyalty?sslmode=require

# === REDIS ===
# Dev (Docker)
REDIS_URL=redis://localhost:6379
# Production (Upstash)
# REDIS_URL=rediss://default:xxx@xxx.upstash.io:6380
# UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
# UPSTASH_REDIS_REST_TOKEN=xxx

# === JWT ===
# min 32 символа! Генерация: openssl rand -base64 32
JWT_SECRET=dev-secret-CHANGE-IN-PRODUCTION-must-be-32-chars-min
JWT_REFRESH_SECRET=dev-refresh-secret-CHANGE-IN-PRODUCTION-must-be-32
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=30d
# Для dual-secret ротации (заполняется при ротации)
# JWT_PREVIOUS_SECRET=

# === S3 / STORAGE ===
# Dev (MinIO)
S3_ENDPOINT=http://localhost:9000
S3_BUCKET=loyalty-dev
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_REGION=us-east-1
# Production (Cloudflare R2)
# S3_ENDPOINT=https://xxx.r2.cloudflarestorage.com
# S3_BUCKET=max-loyalty
# S3_ACCESS_KEY=xxx
# S3_SECRET_KEY=xxx
# S3_REGION=auto

# === EMAIL ===
# Dev (Mailhog SMTP)
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASS=
# Production (Resend)
RESEND_API_KEY=re_dev_placeholder
EMAIL_FROM=noreply@maxloyalty.ru
EMAIL_FROM_NAME=Max Loyalty

# === SMS ===
SMSRU_API_KEY=smsru_placeholder
SMSRU_SENDER=MAX-LOYALTY

# === TELEGRAM ===
TELEGRAM_BOT_TOKEN=bot_dev_placeholder:xxx
TELEGRAM_MINI_APP_URL=http://localhost:5173
TELEGRAM_WEBHOOK_SECRET=dev_webhook_secret

# === PAYMENTS ===
# YooKassa
YOOKASSA_SHOP_ID=
YOOKASSA_SECRET_KEY=
YOOKASSA_WEBHOOK_SECRET=
# Stripe (international)
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# === MONITORING ===
BETTER_STACK_TOKEN=
SENTRY_DSN=
LOG_LEVEL=debug

# === FEATURE FLAGS ===
# Управление через Admin UI или этот файл для dev
FEATURE_LOYALTY_TRANSFERS=false
FEATURE_TELEGRAM_MINI_APP=true
FEATURE_ADVANCED_ANALYTICS=false
